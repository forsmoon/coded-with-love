<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Special Surprise</title>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* --- MAIN LAYOUT --- */
        body {
            background: linear-gradient(135deg, #f4e1f8 0%, #e0ecfa 100%);
            display: flex;
            flex-direction: column; /* Added for better vertical flow */
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Changed from height to min-height */
            margin: 0;
            font-family: 'Quicksand', sans-serif;
            overflow-x: hidden; /* Changed from hidden to allow vertical scroll */
            padding: 20px 0; /* Added space at top/bottom for scrolling */
        }

        /* --- 1. BACKGROUND ANIMATIONS --- */
        #bg-animations {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .heart {
            position: absolute;
            bottom: -20px;
            font-size: 24px;
            color: rgba(255, 182, 193, 0.6);
            animation: floatUp linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
        }

        .h1 { left: 10%; animation-duration: 8s; animation-delay: 0s; font-size: 20px; }
        .h2 { left: 30%; animation-duration: 12s; animation-delay: 2s; font-size: 28px; color: rgba(255, 105, 180, 0.5); }
        .h3 { left: 50%; animation-duration: 10s; animation-delay: 4s; font-size: 22px; }
        .h4 { left: 70%; animation-duration: 14s; animation-delay: 1s; font-size: 30px; color: rgba(255, 105, 180, 0.5); }
        .h5 { left: 90%; animation-duration: 9s; animation-delay: 3s; font-size: 25px; }

        .firework-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            pointer-events: none;
        }

        /* --- 2. THE ENVELOPE STYLES --- */
        #envelope-wrapper {
            position: relative;
            cursor: pointer;
            transition: transform 0.5s;
            z-index: 20;
        }
        
        #envelope-wrapper:hover {
            transform: scale(1.05);
        }

        .envelope {
            position: relative;
            width: 300px;
            height: 200px;
            background-color: #ffbdd8;
            border-radius: 10px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .envelope::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 150px solid transparent;
            border-right: 150px solid transparent;
            border-top: 100px solid #ff9ec6;
            transform-origin: top;
            transition: transform 0.6s ease-in-out;
            z-index: 5;
            border-radius: 10px;
        }

        .heart-seal {
            position: absolute;
            top: 35px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 40px;
            color: #ff4757;
            z-index: 6;
            transition: opacity 0.4s;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.2); }
            100% { transform: translateX(-50%) scale(1); }
        }

        .paper-preview {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            background: white;
            z-index: 2;
            transition: transform 0.6s ease-in-out;
            border-radius: 5px;
        }

        .pocket {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 0;
            border-left: 150px solid #ffbdd8;
            border-right: 150px solid #ffbdd8;
            border-top: 100px solid transparent;
            border-bottom: 100px solid #ffaec9;
            z-index: 4;
            border-radius: 0 0 10px 10px;
        }

        .click-text {
            text-align: center;
            margin-top: 30px;
            font-family: 'Indie Flower', cursive;
            font-size: 24px;
            color: #5d4e65;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        /* --- ANIMATION STATES --- */
        .envelope.open::before {
            transform: rotateX(180deg);
            z-index: 1;
        }
        
        .envelope.open .heart-seal {
            opacity: 0;
        }

        .envelope.open .paper-preview {
            transform: translateY(-80px);
            z-index: 3;
        }

        .hidden-envelope {
            display: none;
        }

        /* --- 3. THE ACTUAL LETTER --- */
        .letter-container {
            display: none;
            background-color: #fffaf0;
            width: 85%;
            max-width: 600px;
            padding: 40px;
            border-radius: 20px;
            border: 4px dashed #ffbdd8;
            box-shadow: 0 10px 30px rgba(255, 182, 193, 0.4);
            line-height: 1.6;
            font-size: 22px;
            font-family: 'Indie Flower', cursive;
            color: #5d4e65;
            position: relative;
            z-index: 10;
            opacity: 0;
            transition: opacity 1s;
            box-sizing: border-box; /* Ensures padding doesn't break width */
            margin-bottom: 50px; /* Space for the footer */
        }

        .flower-decoration {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 80px;
            height: auto;
            opacity: 0.8;
        }

        #typing-output::after {
            content: '|';
            animation: blink 1s step-end infinite;
            color: #ff6b6b;
            font-weight: bold;
        }

        @keyframes blink {
            from, to { opacity: 1; }
            50% { opacity: 0; }
        }

        /* --- 4. FOOTER CREDIT --- */
        .footer-credit {
            position: relative; /* Changed from fixed for better scrolling */
            margin-top: 20px;
            font-family: 'Quicksand', sans-serif;
            font-size: 14px;
            color: #8c8c8c;
            z-index: 100;
            opacity: 0.8;
            text-align: center;
        }

        @media (max-width: 600px) {
            .letter-container { width: 92%; padding: 25px; font-size: 19px; }
            .flower-decoration { width: 50px; }
        }

    </style>
</head>
<body>

    <div id="bg-animations">
        <div class="heart h1">❤</div>
        <div class="heart h2">❤</div>
        <div class="heart h3">❤</div>
        <div class="heart h4">❤</div>
        <div class="heart h5">❤</div>
    </div>

    <div id="envelope-wrapper">
        <div class="envelope" id="envelope">
            <div class="paper-preview"></div>
            <div class="pocket"></div>
            <div class="heart-seal">❤</div>
        </div>
        <div class="click-text">Click here to open your letter</div>
    </div>

    <div class="letter-container" id="main-letter">
        <img src="flowers.png" class="flower-decoration" alt="Flowers">
        <div id="typing-output"></div>
    </div>

    <div class="footer-credit">coded with love by Lester❤️</div>

    <script>
        // --- CONFIG ---
        const letterContent = `Dearest Smoon <3,

Heeyyy smoon hope you're doing well you're misseedd super duper much !

I wrote this letter for ya just wanna say thank ya so much for being here w aychhek alekhr li konnti part f 2025 w dabesst part heyya adhika w i mean it  
aycheek for being by my side kol moment aycheek li konnti ahsseen partner layya smoon aycheek for kol chy konntti laya ahssen hajja sareet fll am hedha
aychek li konti laya partner more than perfect w m sorry alla ay haja belhak i mean it w nawdhhelk wallah khater you mean kol chy smoon 
lyom special day w f nafss l waket mahabitouch yji jemla khater bech trawwhi w bech tabka blassttk belhaak b denya
wannaa sayy koll amm w ennti hayya b alf khirr smoon nchallaah amm full of successs w tamayoz w farhaa w kol koll chyy khater you deserveee all the best w akthher b barccha zedaa w nchallaah matchouffi keen lkhirrr ahlla w abbaan smooonn❤️❤️❤️❤️

You're the best ahla smoon!,
Yours Dhia.`;

        const typingSpeed = 50; 

        // --- ELEMENTS ---
        const envelopeWrapper = document.getElementById('envelope-wrapper');
        const envelope = document.getElementById('envelope');
        const mainLetter = document.getElementById('main-letter');
        const outputElement = document.getElementById('typing-output');

        // --- INTERACTION LOGIC ---
        envelopeWrapper.addEventListener('click', () => {
            envelope.classList.add('open');
            setTimeout(() => {
                envelopeWrapper.style.opacity = '0';
                envelopeWrapper.style.transition = 'opacity 0.5s';
            }, 1000);

            setTimeout(() => {
                envelopeWrapper.classList.add('hidden-envelope');
                mainLetter.style.display = 'block';
                setTimeout(() => {
                    mainLetter.style.opacity = '1';
                    startTyping(); 
                }, 100);
            }, 1500);
        });

        // --- TYPING LOGIC ---
        let charIndex = 0;
        function startTyping() {
            if (charIndex < letterContent.length) {
                const currentChar = letterContent.charAt(charIndex);
                if (currentChar === '\n') {
                    outputElement.innerHTML += '<br>';
                } else {
                    outputElement.innerHTML += currentChar;
                }
                charIndex++;
                
                // Auto-scroll as it types so the user sees the new text
                window.scrollTo(0, document.body.scrollHeight);
                
                setTimeout(startTyping, typingSpeed);
            }
        }

        // --- FIREWORKS LOGIC ---
        const bgContainer = document.getElementById('bg-animations');
        const colors = ['#ff6b6b', '#ffd700', '#87ceeb', '#90ee90', '#ffc0cb'];

        setInterval(() => {
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * window.innerHeight;
            const color = colors[Math.floor(Math.random() * colors.length)];
            for (let i = 0; i < 15; i++) createParticle(x, y, color);
        }, 2000);

        function createParticle(x, y, color) {
            const particle = document.createElement('div');
            particle.classList.add('firework-particle');
            particle.style.backgroundColor = color;
            particle.style.left = x + 'px';
            particle.style.top = y + 'px';
            bgContainer.appendChild(particle);
            
            const angle = Math.random() * Math.PI * 2;
            const velocity = 40 + Math.random() * 60;
            const tx = Math.cos(angle) * velocity;
            const ty = Math.sin(angle) * velocity;

            particle.animate([
                { transform: 'translate(0, 0)', opacity: 1 },
                { transform: `translate(${tx}px, ${ty}px)`, opacity: 0 }
            ], { duration: 1000 + Math.random() * 1000, easing: 'ease-out' })
            .onfinish = () => particle.remove();
        }
    </script>
</body>
</html>
